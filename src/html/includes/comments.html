<!-- Use `amp-list` to render existing comments to make sure that the latest comments appear if the page is loaded via AMP Cache.  -->
<div class="comments">
    <div class="container-short">
        <h3 class="comments__title">Comments</h3>
        <div class="comments__header">
            <div class="comments__count">2<small>Comments</small></div>
            <span amp-access="NOT loggedIn" role="button" tabindex="0" amp-access-hide>
                  <button on="tap:amp-access.login-sign-in" class="btn btn_gray comment-btn">Sing In</button>
            </span>

            <span amp-access="loggedIn" role="button" tabindex="0" amp-access-hide>
                <button on="tap:amp-access.login-sign-out" class="btn btn_gray comment-btn">Logout</button>
            </span>

        </div>

        <div class="comments__select-wrap">
            <span>Sort by</span>
            <select name="" id="" class="comments-select">
                <option value="">Best</option>
                <option value="">Newest</option>
                <option value="">Oldest</option>
            </select>
        </div>

        <amp-list  width="auto" height="250" layout="fixed-height" src="https://ampbyexample.com/json/comments.json">
            <template type="amp-mustache">

                <div class="comment">
                    <div class="comment__header">
                        <div class="comment__author-foto-wrap">
                            <span class="comment__author-foto">
                                <amp-img width="58" height="58" layout="responsive" class="mr1 flex-none" alt="user" src="img/server/author1.svg"></amp-img>
                            </span>
                        </div>
                        <div class="comment__info">
                            <span class="comment__author-name"><strong>{{user}}</strong></span>
                            <span class="comment__date">{{datetime}}</span>
                        </div>
                    </div>
                    <div class="comment__content">
                        <p>{{text}}</p>
                        <div class="comment__reply">
                                 <button class="btn btn_gray reply-btn">Reply</button>
                            <div class="like">
                                <span class="dislike-icon">
                                    <amp-img width="18" height="16" alt="dislike" src="img/server/dislike.svg"></amp-img>
                                </span>
                                <span class="like__count">12</span>
                                <span class="like-icon">
                                    <amp-img width="18" height="16" alt="like" src="img/server/like.svg"></amp-img>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                </div>
                
            </template>
        </amp-list>
        
        <form amp-access="loggedIn" amp-access-hide method="post" action-xhr="https://ampbyexample.com/samples_templates/comment_section/submit-comment-xhr?" target="_top">
        
        <div submit-success>
          <template type="amp-mustache">
            <div class="comment">
                    <div class="comment__header">
                        <div class="comment__author-foto-wrap">
                            <span class="comment__author-foto">
                                <amp-img width="58" height="58" layout="responsive" class="mr1 flex-none" alt="user" src="img/server/author1.svg"></amp-img>
                            </span>
                        </div>
                        <div class="comment__info">
                            <span class="comment__author-name"><strong>{{user}}</strong></span>
                            <span class="comment__date">{{datetime}}</span>
                        </div>
                    </div>
                    <div class="comment__content">
                        <p>{{text}}</p>
                        <div class="comment__reply" >
                            <button class="btn btn_gray reply-btn">Reply</button>
                            <div class="like">
                                <span class="dislike-icon">
                                    <amp-img width="18" height="16" alt="dislike" src="img/server/dislike.svg"></amp-img>
                                </span>
                                <span class="like__count">12</span>
                                <span class="like-icon">
                                    <amp-img width="18" height="16" alt="like" src="img/server/like.svg"></amp-img>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                </div>
          </template>
        </div>

        <div class="comment">
            <div class="comment__header">
                <div class="comment__author-foto-wrap">
                    <span class="comment__author-foto">
                        <amp-img width="58" height="58" layout="responsive" class="mr1 flex-none" alt="user" src="img/server/author1.svg"></amp-img>
                    </span>
                </div>
                <textarea name="" id=""  class="comment__textarea" placeholder="Be the first to comment…"></textarea>
                <button type="submit" class="btn btn_gray comment-btn">Post</button>

            </div>
            <a href="" class="btn btn_gray show-more-comments-btn">
                <span><amp-img width="19" height="19" alt="user" src="img/server/chat-icon.svg"></amp-img>Show More Comments…</span>
            </a>
        </div>
        

        <div submit-error>
          <template type="amp-mustache">
            <p class="form-descr-text error">Error! Looks like something went wrong with your comment, please try to submit it again. {{error}}</p>
          </template>
        </div>

      </form>

    </div>
</div>

